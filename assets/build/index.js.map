{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./assets/js/index.js","webpack:///./assets/js/utils/spinners.js"],"names":["document","addEventListener","licenseForms","querySelectorAll","forEach","form","submitLicenseForm","e","preventDefault","button","querySelector","license","value","statusWrapper","spinButton","fetch","ajaxurl","method","credentials","body","FormData","then","response","json","data","success","classList","remove","add","message","innerHTML","newFormInputs","replaceFormInputs","textContent","finally","unspinButton","formData","Object","keys","key","input","disabled"],"mappings":"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","file":"index.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./assets/js/index.js\");\n","/* global ajaxurl */\n\nimport {spinButton, unspinButton} from \"./utils/spinners\";\n\ndocument.addEventListener( 'DOMContentLoaded', () => {\n\tconst licenseForms = document.querySelectorAll( '.edd-sl-sdk-license-form' );\n\tif ( ! licenseForms ) {\n\t\treturn;\n\t}\n\n\tlicenseForms.forEach( form => {\n\t\tform.addEventListener( 'submit', submitLicenseForm );\n\t} )\n} )\n\n/**\n * Handles submitting the license form.\n *\n * @param e\n */\nfunction submitLicenseForm( e ) {\n\te.preventDefault();\n\n\tconst form = this;\n\tconst button = form.querySelector( 'button[type=\"submit\"]' );\n\tconst license = form.querySelector( 'input[name=\"license_key\"]' );\n\n\tif ( ! license || ! license.value ) {\n\t\treturn;\n\t}\n\n\tconst statusWrapper = form.querySelector( '.edd-sl-sdk-license-response' );\n\n\tif ( button ) {\n\t\tspinButton( button );\n\t}\n\n\tfetch( ajaxurl, {\n\t\tmethod: 'POST',\n\t\tcredentials: 'same-origin',\n\t\tbody: new FormData( form )\n\t} )\n\t\t.then( response => response.json() )\n\t\t.then( data => {\n\t\t\tif ( data.success ) {\n\t\t\t\tstatusWrapper.classList.remove( 'edd-sl-sdk-license-response__invalid' );\n\t\t\t\tstatusWrapper.classList.add( 'edd-sl-sdk-license-response__valid' );\n\n\t\t\t\tif ( data.data.message ) {\n\t\t\t\t\tstatusWrapper.innerHTML = data.data.message;\n\t\t\t\t}\n\n\t\t\t\tif ( data.data.newFormInputs ) {\n\t\t\t\t\treplaceFormInputs( form, data.data.newFormInputs );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tstatusWrapper.classList.remove( 'edd-sl-sdk-license-response__valid' );\n\t\t\t\tstatusWrapper.classList.add( 'edd-sl-sdk-license-response__invalid' );\n\t\t\t\tstatusWrapper.textContent = data.data;\n\t\t\t}\n\t\t} )\n\t\t.finally( () => {\n\t\t\tunspinButton( button );\n\t\t} );\n}\n\n/**\n * This replaces some of the form values, to prepare the form for being used in the\n * reverse action. For example: If we just activated a license key, then we replace\n * the nonce and action so we can immediately choose to deactivate the license without\n * requiring a page refresh.\n *\n * @param {HTMLElement} form\n * @param {Object} formData\n */\nfunction replaceFormInputs( form, formData ) {\n\tObject.keys( formData ).forEach( key => {\n\t\tif ( 'buttonText' === key ) {\n\t\t\tconst button = form.querySelector( 'button[type=\"submit\"]' );\n\t\t\tif ( button ) {\n\t\t\t\tbutton.textContent = formData[key];\n\t\t\t}\n\t\t} else {\n\t\t\tconst input = form.querySelector( 'input[name=\"' + key + '\"]' );\n\t\t\tif ( input ) {\n\t\t\t\tinput.value = formData[key];\n\t\t\t}\n\t\t}\n\t} )\n}\n","export function spinButton( button ) {\n\tbutton.disabled = true;\n\tbutton.classList.add( 'updating-message' );\n}\n\nexport function unspinButton( button ) {\n\tbutton.disabled = false;\n\tbutton.classList.remove( 'updating-message' );\n}\n"],"sourceRoot":""}